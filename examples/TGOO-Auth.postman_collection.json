{
  "info": {
    "name": "TGOO Auth API",
    "description": "Cole√ß√£o completa de endpoints da API de Autentica√ß√£o TGOO\n\nPara mais informa√ß√µes, consulte: INTEGRATION_GUIDE.md",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "tgoo-auth-collection-2026",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://auth.tgoo.eu/api",
      "type": "string"
    },
    {
      "key": "platformCode",
      "value": "dressme",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "üîì P√∫blicos (Sem Autentica√ß√£o)",
      "item": [
        {
          "name": "Listar Plataformas",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/platforms",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "platforms"]
            },
            "description": "Lista todas as plataformas ativas dispon√≠veis no sistema."
          },
          "response": []
        },
        {
          "name": "Criar Conta (Signup)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Salvar dados do usu√°rio criado",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('userId', jsonData.user.id);",
                  "    console.log('‚úÖ Conta criada com sucesso!');",
                  "    console.log('Status:', jsonData.user.status);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"teste@example.com\",\n  \"password\": \"senha123\",\n  \"fullName\": \"Usu√°rio Teste\",\n  \"platform\": \"{{platformCode}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "signup"]
            },
            "description": "Cria uma nova conta de usu√°rio.\n\n‚ö†Ô∏è Conta come√ßa com status PENDING e precisa ser aprovada por um ADMIN."
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Salvar token automaticamente",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', jsonData.token);",
                  "    pm.collectionVariables.set('userId', jsonData.user.id);",
                  "    pm.collectionVariables.set('userEmail', jsonData.user.email);",
                  "    pm.collectionVariables.set('userRole', jsonData.user.role);",
                  "    console.log('‚úÖ Login bem-sucedido!');",
                  "    console.log('Token salvo automaticamente');",
                  "    console.log('Usu√°rio:', jsonData.user.email);",
                  "    console.log('Role:', jsonData.user.role);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@tgoo.eu\",\n  \"password\": \"Senha@123\",\n  \"platform\": \"{{platformCode}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Realiza login e retorna token JWT.\n\n‚úÖ O token √© salvo automaticamente na vari√°vel {{authToken}}."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üîê Autenticados (USER)",
      "item": [
        {
          "name": "Obter Perfil",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            },
            "description": "Retorna informa√ß√µes do usu√°rio autenticado."
          },
          "response": []
        },
        {
          "name": "Alterar Senha",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"oldPassword\": \"senha_antiga\",\n  \"newPassword\": \"senha_nova\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/password/change",
              "host": ["{{baseUrl}}"],
              "path": ["password", "change"]
            },
            "description": "Altera a senha do usu√°rio autenticado."
          },
          "response": []
        },
        {
          "name": "Obter Chave API Gemini",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api-key/gemini",
              "host": ["{{baseUrl}}"],
              "path": ["api-key", "gemini"]
            },
            "description": "Retorna a chave API do Gemini salva para o usu√°rio."
          },
          "response": []
        },
        {
          "name": "Salvar Chave API Gemini",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"geminiApiKey\": \"sua_chave_api_aqui\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api-key/gemini",
              "host": ["{{baseUrl}}"],
              "path": ["api-key", "gemini"]
            },
            "description": "Salva ou atualiza a chave API do Gemini para o usu√°rio."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üëë Admin (ADMIN e SUPER_ADMIN)",
      "item": [
        {
          "name": "Listar Usu√°rios",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/users?platform={{platformCode}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "platform",
                  "value": "{{platformCode}}",
                  "description": "C√≥digo da plataforma (opcional)"
                }
              ]
            },
            "description": "Lista usu√°rios.\n\n- ADMIN: V√™ apenas usu√°rios de sua plataforma\n- SUPER_ADMIN: V√™ usu√°rios de todas as plataformas (use query param `platform` para filtrar)"
          },
          "response": []
        },
        {
          "name": "Criar Usu√°rio",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"novo@example.com\",\n  \"password\": \"senha123\",\n  \"fullName\": \"Novo Usu√°rio\",\n  \"role\": \"USER\",\n  \"status\": \"ACTIVE\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"]
            },
            "description": "Cria um novo usu√°rio.\n\n- ADMIN: Cria usu√°rio em sua plataforma\n- SUPER_ADMIN: Pode especificar `platform` no body"
          },
          "response": []
        },
        {
          "name": "Atualizar Usu√°rio",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"ADMIN\",\n  \"status\": \"ACTIVE\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/:userId",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":userId"],
              "variable": [
                {
                  "key": "userId",
                  "value": "1",
                  "description": "ID do usu√°rio"
                }
              ]
            },
            "description": "Atualiza role e/ou status de um usu√°rio.\n\n‚ö†Ô∏è ADMIN n√£o pode promover para SUPER_ADMIN."
          },
          "response": []
        },
        {
          "name": "Resetar Senha do Usu√°rio",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/:userId/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":userId", "reset-password"],
              "variable": [
                {
                  "key": "userId",
                  "value": "1",
                  "description": "ID do usu√°rio"
                }
              ]
            },
            "description": "Reseta a senha do usu√°rio para uma senha gerada automaticamente.\n\nRetorna a nova senha na resposta."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üëëüëë Super Admin (SUPER_ADMIN apenas)",
      "item": [
        {
          "name": "Listar Plataformas (Admin)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/platforms",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "platforms"]
            },
            "description": "Lista todas as plataformas (incluindo inativas).\n\n‚ö†Ô∏è Apenas SUPER_ADMIN"
          },
          "response": []
        },
        {
          "name": "Criar Plataforma",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"novaplataforma\",\n  \"name\": \"Nova Plataforma\",\n  \"domain\": \"novaplataforma.tgoo.eu\",\n  \"description\": \"Descri√ß√£o da nova plataforma\",\n  \"isActive\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/platforms",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "platforms"]
            },
            "description": "Cria uma nova plataforma.\n\n‚ö†Ô∏è Apenas SUPER_ADMIN"
          },
          "response": []
        },
        {
          "name": "Atualizar Plataforma",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Nome Atualizado\",\n  \"isActive\": false\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/platforms/:platformId",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "platforms", ":platformId"],
              "variable": [
                {
                  "key": "platformId",
                  "value": "1",
                  "description": "ID da plataforma"
                }
              ]
            },
            "description": "Atualiza informa√ß√µes de uma plataforma.\n\n‚ö†Ô∏è Apenas SUPER_ADMIN"
          },
          "response": []
        },
        {
          "name": "Criar Usu√°rio em Plataforma Espec√≠fica",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin.proj2@example.com\",\n  \"password\": \"senha123\",\n  \"fullName\": \"Admin Projeto 2\",\n  \"role\": \"ADMIN\",\n  \"status\": \"ACTIVE\",\n  \"platform\": \"projeto2\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"]
            },
            "description": "SUPER_ADMIN pode criar usu√°rio em qualquer plataforma especificando o campo `platform`."
          },
          "response": []
        }
      ]
    }
  ]
}

